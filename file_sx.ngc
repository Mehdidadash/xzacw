(file.ngc)
g18 (xz plane)
g21 (set unit to mm)
g90
g64
g92.1
#70=5(count of files)
#71=0 (iritation parameter)
M66 E0 L0 (dummy m66 to force sync hal pins)
M114
M115
M66 E0 L0 (dummy m66 to force sync hal pins)
m105
#72=#<_hal[pyvcp.wearc_display]> (x touch place last time: .065)
#73= 6 (x start and retreat point)
#74=[#73+.6-#72] (wear compensation)
#75=0.00045 (wheel wear per part)
#76=26 (total length of the part)
#77=#<_hal[pyvcp.partcount_display]> (read count of parts)
M66 E0 L0 (dummy m66 to force sync hal pins)
#2=1 (radial multipication)
#3=0(radial offset)
#4=1 (grinding feed override)
#5=2 (other ops feed override)
#6=4 (default linear feed speed mm/s)
#78=1 (number of iterations for depths)
#79=1 (number of iterations for threads)
#80=6 (total number of iterations for depths)
o110 while [#71 LT #70]
#74=[#73+.6-#72]
g0 x[#73]
g94 g1 z68 w65.5 f[#6*10] (decrease wasted material by 20mm)
g92 x[#74] z0 c0 w0
M103
m3 s3000
g4 p5
m107 (coolant)
g92 c0
g0 x1
o111 while [#78 LE #80] (first iteration)
o112 while [#79 LE 3] (first iteration)
#4=[#4+1] (update grinding feed override dynamically before calling the subroutine)
o<sx> call [#4] [#78] [#79] [#6] [#80]
#79=[#79+1]
o112 endwhile
#78=[#78+1]
#79=1 (reset thread iteration counter)
o111 endwhile
#78=1 (reset depth iteration counter)
g0 x[#73]
g92 c0
g91 g94 g1 z[-16] f480
m101
g4 p1
m104
g4 p2
g91 g94 g1 z[#76] f480
M103
g4 p1
m102
g4 p1

g92.1
g90 g0 z68 c0
#72=[#72-#75]
M112 P#72
#77=[#77+1]
M113 P#77
M114
M115
#71=[#71+1]
M66 E0 L0 (dummy m66 to force sync hal pins)
(DEBUG, #71 count in serie)
o110 endwhile
m108
m104
m106
M2 M5 (end program)